#   count(
#     month = lubridate::month(arrival_date, abbr = FALSE, label = TRUE),
#     arrival_date_year,
#   ) %>%
#   ggplot(aes(x = month, y = n)) +
#   geom_boxplot() +
#   coord_flip()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   filter(n_night > 0) %>%
#   mutate(has_babies = babies > 0) %>%
#   ggplot(aes(x = has_babies, y = n_night)) +
#   geom_boxplot(aes(fill = factor(babies))) +
#   scale_y_log10()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   count(n_night, children)
#
# hotels %>%
#   filter(adults <= 4) %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   ggplot(aes(y = n_night, x = adults)) +
#   geom_sina(aes(group = adults)) +
#   scale_y_log10()
# Plot --------------------------------------------------------------------
df %>%
ggplot() +
geom_sf(size = 0.01, fill = "black", color = "gray90") +
# coord_sf(crs = "+proj=moll") +
# geom_sf(
#   data = filter(df, country_name == "Portugal"),
#   fill = "red",
#   size = 0.01
# ) +
geom_curve(
data = fromto,
aes(
x = longitude,
y = latitude,
xend = -686822,
yend = 4744611,
# color = bin,
size = n
),
curvature = 0.1,
color = "#337AB7",
# size = 0.25,
alpha = 0.5,
lineend = "round"
) +
scale_size(range = c(0.1, 0.25)) +
theme(
legend.position = "none",
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.title = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank()
)
pdf_file <- "graphs/tidytuesday_2020_week07.pdf"
ggsave(pdf_file,
device = cairo_pdf
)
knitr::plot_crop(pdf_file)
# hotels %>%
#   group_by(country) %>%
#   summarise(average_stays_in_nights = mean(stays_in_nights, na.rm = TRUE))
#
# hotels %>%
#   count(arrival_date) %>%
#   ggplot(aes(x = arrival_date, y = n)) +
#   geom_line()
#
# hotels %>%
#   count(
#     month = lubridate::month(arrival_date, abbr = FALSE, label = TRUE),
#     arrival_date_year,
#   ) %>%
#   ggplot(aes(x = month, y = n)) +
#   geom_boxplot() +
#   coord_flip()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   filter(n_night > 0) %>%
#   mutate(has_babies = babies > 0) %>%
#   ggplot(aes(x = has_babies, y = n_night)) +
#   geom_boxplot(aes(fill = factor(babies))) +
#   scale_y_log10()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   count(n_night, children)
#
# hotels %>%
#   filter(adults <= 4) %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   ggplot(aes(y = n_night, x = adults)) +
#   geom_sina(aes(group = adults)) +
#   scale_y_log10()
fromto
# Plot --------------------------------------------------------------------
df %>%
ggplot() +
geom_sf(size = 0.01, fill = "black", color = "gray90") +
# coord_sf(crs = "+proj=moll") +
# geom_sf(
#   data = filter(df, country_name == "Portugal"),
#   fill = "red",
#   size = 0.01
# ) +
geom_curve(
data = fromto,
aes(
x = longitude,
y = latitude,
xend = -686822,
yend = 4744611,
# color = bin,
size = n
),
curvature = 0.1,
color = "#337AB7",
# size = 0.25,
alpha = 0.5,
lineend = "round"
) +
scale_size(range = c(0.1, 0.25)) +
theme(
legend.position = "none",
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.title = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank()
)
pdf_file <- "graphs/tidytuesday_2020_week07.pdf"
ggsave(pdf_file,
device = cairo_pdf
)
knitr::plot_crop(pdf_file)
bitmap <- pdftools::pdf_render_page(pdf_file, dpi = 600)
png_file <- here::here("graphs", "tidytuesday_2020_week07.png")
png::writePNG(bitmap, png_file)
# hotels %>%
#   group_by(country) %>%
#   summarise(average_stays_in_nights = mean(stays_in_nights, na.rm = TRUE))
#
# hotels %>%
#   count(arrival_date) %>%
#   ggplot(aes(x = arrival_date, y = n)) +
#   geom_line()
#
# hotels %>%
#   count(
#     month = lubridate::month(arrival_date, abbr = FALSE, label = TRUE),
#     arrival_date_year,
#   ) %>%
#   ggplot(aes(x = month, y = n)) +
#   geom_boxplot() +
#   coord_flip()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   filter(n_night > 0) %>%
#   mutate(has_babies = babies > 0) %>%
#   ggplot(aes(x = has_babies, y = n_night)) +
#   geom_boxplot(aes(fill = factor(babies))) +
#   scale_y_log10()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   count(n_night, children)
#
# hotels %>%
#   filter(adults <= 4) %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   ggplot(aes(y = n_night, x = adults)) +
#   geom_sina(aes(group = adults)) +
#   scale_y_log10()
# Plot --------------------------------------------------------------------
df %>%
ggplot() +
geom_sf(size = 0.1, fill = "black", color = "gray90") +
# coord_sf(crs = "+proj=moll") +
# geom_sf(
#   data = filter(df, country_name == "Portugal"),
#   fill = "red",
#   size = 0.01
# ) +
geom_curve(
data = fromto,
aes(
x = longitude,
y = latitude,
xend = -686822,
yend = 4744611,
# color = bin,
size = n
),
curvature = 0.1,
color = "#337AB7",
# size = 0.25,
alpha = 0.5,
lineend = "round"
) +
scale_size(range = c(0.1, 0.25)) +
theme(
legend.position = "none",
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.title = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank()
)
pdf_file <- "graphs/tidytuesday_2020_week07.pdf"
ggsave(pdf_file,
device = cairo_pdf
)
knitr::plot_crop(pdf_file)
bitmap <- pdftools::pdf_render_page(pdf_file, dpi = 600)
png_file <- here::here("graphs", "tidytuesday_2020_week07.png")
png::writePNG(bitmap, png_file)
# hotels %>%
#   group_by(country) %>%
#   summarise(average_stays_in_nights = mean(stays_in_nights, na.rm = TRUE))
#
# hotels %>%
#   count(arrival_date) %>%
#   ggplot(aes(x = arrival_date, y = n)) +
#   geom_line()
#
# hotels %>%
#   count(
#     month = lubridate::month(arrival_date, abbr = FALSE, label = TRUE),
#     arrival_date_year,
#   ) %>%
#   ggplot(aes(x = month, y = n)) +
#   geom_boxplot() +
#   coord_flip()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   filter(n_night > 0) %>%
#   mutate(has_babies = babies > 0) %>%
#   ggplot(aes(x = has_babies, y = n_night)) +
#   geom_boxplot(aes(fill = factor(babies))) +
#   scale_y_log10()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   count(n_night, children)
#
# hotels %>%
#   filter(adults <= 4) %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   ggplot(aes(y = n_night, x = adults)) +
#   geom_sina(aes(group = adults)) +
#   scale_y_log10()
styler:::style_selection()
# Plot --------------------------------------------------------------------
df %>%
ggplot() +
geom_sf(size = 0.1, fill = "black", color = "gray90") +
# coord_sf(crs = "+proj=moll") +
# geom_sf(
#   data = filter(df, country_name == "Portugal"),
#   fill = "red",
#   size = 0.01
# ) +
geom_curve(
data = fromto,
aes(
x = longitude,
y = latitude,
xend = -686822,
yend = 4744611,
# color = bin,
size = n
),
curvature = 0.1,
color = "#337AB7",
# size = 0.25,
alpha = 0.5,
lineend = "round"
) +
scale_size(range = c(0.1, 1)) +
theme(
legend.position = "none",
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.title = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank()
)
pdf_file <- "graphs/tidytuesday_2020_week07.pdf"
ggsave(pdf_file,
device = cairo_pdf
)
knitr::plot_crop(pdf_file)
bitmap <- pdftools::pdf_render_page(pdf_file, dpi = 600)
png_file <- here::here("graphs", "tidytuesday_2020_week07.png")
png::writePNG(bitmap, png_file)
# hotels %>%
#   group_by(country) %>%
#   summarise(average_stays_in_nights = mean(stays_in_nights, na.rm = TRUE))
#
# hotels %>%
#   count(arrival_date) %>%
#   ggplot(aes(x = arrival_date, y = n)) +
#   geom_line()
#
# hotels %>%
#   count(
#     month = lubridate::month(arrival_date, abbr = FALSE, label = TRUE),
#     arrival_date_year,
#   ) %>%
#   ggplot(aes(x = month, y = n)) +
#   geom_boxplot() +
#   coord_flip()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   filter(n_night > 0) %>%
#   mutate(has_babies = babies > 0) %>%
#   ggplot(aes(x = has_babies, y = n_night)) +
#   geom_boxplot(aes(fill = factor(babies))) +
#   scale_y_log10()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   count(n_night, children)
#
# hotels %>%
#   filter(adults <= 4) %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   ggplot(aes(y = n_night, x = adults)) +
#   geom_sina(aes(group = adults)) +
#   scale_y_log10()
# Plot --------------------------------------------------------------------
df %>%
ggplot() +
geom_sf(size = 0.1, fill = "black", color = "gray90") +
# coord_sf(crs = "+proj=moll") +
# geom_sf(
#   data = filter(df, country_name == "Portugal"),
#   fill = "red",
#   size = 0.01
# ) +
geom_curve(
data = fromto,
aes(
x = longitude,
y = latitude,
xend = -686822,
yend = 4744611,
# color = bin,
size = n
),
curvature = 0.1,
color = "#337AB7",
# size = 0.25,
alpha = 0.5,
lineend = "round"
) +
scale_size(range = c(0.1, 1)) +
labs(
title = "Sdf"
) +
theme(
legend.position = "none",
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.title = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank()
)
pdf_file <- "graphs/tidytuesday_2020_week07.pdf"
ggsave(pdf_file,
device = cairo_pdf
)
knitr::plot_crop(pdf_file)
bitmap <- pdftools::pdf_render_page(pdf_file, dpi = 600)
png_file <- here::here("graphs", "tidytuesday_2020_week07.png")
png::writePNG(bitmap, png_file)
# hotels %>%
#   group_by(country) %>%
#   summarise(average_stays_in_nights = mean(stays_in_nights, na.rm = TRUE))
#
# hotels %>%
#   count(arrival_date) %>%
#   ggplot(aes(x = arrival_date, y = n)) +
#   geom_line()
#
# hotels %>%
#   count(
#     month = lubridate::month(arrival_date, abbr = FALSE, label = TRUE),
#     arrival_date_year,
#   ) %>%
#   ggplot(aes(x = month, y = n)) +
#   geom_boxplot() +
#   coord_flip()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   filter(n_night > 0) %>%
#   mutate(has_babies = babies > 0) %>%
#   ggplot(aes(x = has_babies, y = n_night)) +
#   geom_boxplot(aes(fill = factor(babies))) +
#   scale_y_log10()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   count(n_night, children)
#
# hotels %>%
#   filter(adults <= 4) %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   ggplot(aes(y = n_night, x = adults)) +
#   geom_sina(aes(group = adults)) +
#   scale_y_log10()
# Plot --------------------------------------------------------------------
df %>%
ggplot() +
geom_sf(size = 0.1, fill = "black", color = "gray90") +
# coord_sf(crs = "+proj=moll") +
# geom_sf(
#   data = filter(df, country_name == "Portugal"),
#   fill = "red",
#   size = 0.01
# ) +
geom_curve(
data = fromto,
aes(
x = longitude,
y = latitude,
xend = -686822,
yend = 4744611,
# color = bin,
size = n
),
curvature = 0.1,
color = "#337AB7",
# size = 0.25,
alpha = 0.5,
lineend = "round"
) +
scale_size(range = c(0.1, 1)) +
labs(
title = "Sdf"
) +
theme(
legend.position = "none",
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.title = element_blank(),
axis.ticks = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
plot.title = element_text(color = "white", hjust = 0.5)
)
pdf_file <- "graphs/tidytuesday_2020_week07.pdf"
ggsave(pdf_file,
device = cairo_pdf
)
knitr::plot_crop(pdf_file)
bitmap <- pdftools::pdf_render_page(pdf_file, dpi = 600)
png_file <- here::here("graphs", "tidytuesday_2020_week07.png")
png::writePNG(bitmap, png_file)
# hotels %>%
#   group_by(country) %>%
#   summarise(average_stays_in_nights = mean(stays_in_nights, na.rm = TRUE))
#
# hotels %>%
#   count(arrival_date) %>%
#   ggplot(aes(x = arrival_date, y = n)) +
#   geom_line()
#
# hotels %>%
#   count(
#     month = lubridate::month(arrival_date, abbr = FALSE, label = TRUE),
#     arrival_date_year,
#   ) %>%
#   ggplot(aes(x = month, y = n)) +
#   geom_boxplot() +
#   coord_flip()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   filter(n_night > 0) %>%
#   mutate(has_babies = babies > 0) %>%
#   ggplot(aes(x = has_babies, y = n_night)) +
#   geom_boxplot(aes(fill = factor(babies))) +
#   scale_y_log10()
#
# hotels %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   count(n_night, children)
#
# hotels %>%
#   filter(adults <= 4) %>%
#   mutate(n_night = stays_in_weekend_nights + stays_in_week_nights) %>%
#   ggplot(aes(y = n_night, x = adults)) +
#   geom_sina(aes(group = adults)) +
#   scale_y_log10()
